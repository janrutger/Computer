USE std_stern_io
INCLUDE std_dict

# Variables
VALUE my_dict 0
VALUE val 0
VALUE key 0
VALUE idx 0
VALUE count 0

# --- Test 1: Creation ---
"--- Test 1: Creation ---\n" PRTstring
"Creating Dictionary with capacity 5...\n" PRTstring
5 DICT.new AS my_dict
"Dictionary created at: " PRTstring my_dict PRINT

# --- Test 2: DICT.put ---
"\n--- Test 2: DICT.put ---\n" PRTstring
"Adding (Key:10, Val:100)...\n" PRTstring
100 10 my_dict DICT.put

"Adding (Key:20, Val:200)...\n" PRTstring
200 20 my_dict DICT.put

"Adding (Key:30, Val:300)...\n" PRTstring
300 30 my_dict DICT.put

"Count (Expect 3): " PRTstring
my_dict DICT.count PRINT

# --- Test 3: DICT.get ---
"\n--- Test 3: DICT.get ---\n" PRTstring
"Get Key 10 (Expect 100): " PRTstring
10 my_dict DICT.get PRINT

"Get Key 20 (Expect 200): " PRTstring
20 my_dict DICT.get PRINT

"Get Key 30 (Expect 300): " PRTstring
30 my_dict DICT.get PRINT

# --- Test 4: Update ---
"\n--- Test 4: Update ---\n" PRTstring
"Updating Key 20 to Value 999...\n" PRTstring
999 20 my_dict DICT.put

"Get Key 20 (Expect 999): " PRTstring
20 my_dict DICT.get PRINT

"Count (Expect 3): " PRTstring
my_dict DICT.count PRINT

# --- Test 5: DICT.has_key ---
"\n--- Test 5: DICT.has_key ---\n" PRTstring
"Has Key 10 (Expect 1): " PRTstring
10 my_dict DICT.has_key PRINT

"Has Key 99 (Expect 0): " PRTstring
99 my_dict DICT.has_key PRINT

# --- Test 6: DICT.item (Iteration) ---
"\n--- Test 6: DICT.item (Iteration) ---\n" PRTstring
my_dict DICT.count AS count
0 AS idx

WHILE idx count < DO
    idx my_dict DICT.item AS val AS key
    "Index " PRTstring idx PRTnum
    " -> Key: " PRTstring key PRTnum
    ", Val: " PRTstring val PRTnum
    "\n" PRTstring
    idx 1 + AS idx
DONE

# --- Test 7: DICT.remove ---
"\n--- Test 7: DICT.remove ---\n" PRTstring
"Removing Key 10 (Swap with last)...\n" PRTstring
10 my_dict DICT.remove

"Count (Expect 2): " PRTstring
my_dict DICT.count PRINT

"Has Key 10 (Expect 0): " PRTstring
10 my_dict DICT.has_key PRINT

# --- Test 8: DICT.clear ---
"\n--- Test 8: DICT.clear ---\n" PRTstring
"Clearing dictionary...\n" PRTstring
my_dict DICT.clear

"Count (Expect 0): " PRTstring
my_dict DICT.count PRINT

"Has Key 20 (Expect 0): " PRTstring
20 my_dict DICT.has_key PRINT

"\n--- Test 9: Invalid Key ---\n" PRTstring
"\nAttempting to add Key 0. Program should halt with an error.\n" PRTstring
999 0 my_dict DICT.put

"\nThis message should NOT be printed.\n" PRTstring

"\nTest Complete.\n" PRTstring